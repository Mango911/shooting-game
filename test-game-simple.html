<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤ªç©ºå°„å‡»æ¸¸æˆ - ç®€åŒ–æµ‹è¯•ç‰ˆ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #000; font-family: Arial, sans-serif; }
        
        #gameCanvas {
            display: block;
            background: #0a0e27;
            margin: 20px auto;
            border: 2px solid #00ff00;
        }
        
        #loadingScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0c1633 0%, #1e3799 50%, #4a69bd 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.3s ease;
        }
        
        #loadingScreen.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            z-index: -1;
        }
        
        .loading-content {
            text-align: center;
            color: white;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            margin: 0 auto 20px;
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid #00ff00;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        #debug {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(0, 0, 0, 0.8);
            color: #0f0;
            font-family: monospace;
            font-size: 12px;
            padding: 10px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 500;
        }
        
        .debug-line { margin: 2px 0; }
        .error { color: #f00; }
        .success { color: #0f0; }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    
    <div id="loadingScreen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h2>ğŸš€ æ¸¸æˆåŠ è½½ä¸­...</h2>
            <p id="loadingText">æ­£åœ¨åˆå§‹åŒ–ç³»ç»Ÿ</p>
        </div>
    </div>
    
    <div id="debug"></div>
    
    <script type="module">
        const debugDiv = document.getElementById('debug');
        const loadingScreen = document.getElementById('loadingScreen');
        const loadingText = document.getElementById('loadingText');
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        function log(msg, isError = false) {
            console.log(msg);
            const line = document.createElement('div');
            line.className = `debug-line ${isError ? 'error' : 'success'}`;
            line.textContent = msg;
            debugDiv.appendChild(line);
            debugDiv.scrollTop = debugDiv.scrollHeight;
        }
        
        log('ğŸ“‹ æ¸¸æˆæµ‹è¯•åˆå§‹åŒ–å¼€å§‹...');
        
        // æµ‹è¯•å¯¼å…¥Gameæ¨¡å—
        async function testGame() {
            try {
                log('1ï¸âƒ£ å¼€å§‹å¯¼å…¥Gameæ¨¡å—...');
                const { default: Game } = await import('/dist/Game.js');
                log('âœ“ Gameæ¨¡å—å¯¼å…¥æˆåŠŸ');
                
                log('2ï¸âƒ£ åˆ›å»ºGameå®ä¾‹...');
                const game = new Game(canvas);
                log('âœ“ Gameå®ä¾‹åˆ›å»ºæˆåŠŸ');
                log('âœ“ æ¸¸æˆçŠ¶æ€: ' + game.gameState);
                
                log('3ï¸âƒ£ å¯åŠ¨æ¸¸æˆ...');
                game.start();
                log('âœ“ æ¸¸æˆå¯åŠ¨æˆåŠŸ');
                
                log('4ï¸âƒ£ éšè—åŠ è½½å±å¹•...');
                setTimeout(() => {
                    loadingScreen.classList.add('hidden');
                    log('âœ“ åŠ è½½å±å¹•å·²éšè—');
                }, 500);
                
                log('');
                log('âœ… æ¸¸æˆåˆå§‹åŒ–å®Œæˆï¼æ¸¸æˆåº”è¯¥æ­£å¸¸è¿è¡Œã€‚', false);
                
            } catch (error) {
                log(`âŒ é”™è¯¯: ${error.message}`, true);
                log(`å †æ ˆ: ${error.stack}`, true);
            }
        }
        
        // ç­‰å¾…æ¨¡å—åŠ è½½
        setTimeout(testGame, 1000);
    </script>
</body>
</html>
